<html>
    <body>
        <script>

            //coord -> [float, float]
            //returns City
            function getCity(coord)
            {
                return null;
            }

            //returns [float, float]
            function getDeviceCoordinates()
            {
                return  [null, null];
            }

            //coord -> [float, float]
            //returns float
            function  getNearestCityCenterDistance(coord)
            {
                return null;
            }

            //coord -> [float, float]
            //returns float
            function getEarthCenterDistance(x, z)
            {
                const a = 12742; //km
                const b = 12713; //km

                var exp1 = a^4 * (Math.cos(x))^2 + b^4 * (Math.sin(x))^2;
                var exp2 = a^2 * (Math.cos(x))^2 + b^2 * (Math.sin(x))^2;
                var exp3 = 2 * z * Math.sqrt(exp2);
                return exp1 / exp2 + exp3 + z^2;
            }

            //text -> xxx.xxx, yyy.yyy
            //constraints -> -90 <= x <= 90 and -180 <= y <= 180
            //returns [float, float]
            function parseCoord(text)
            {
                //let coords = text.split(",");
                //let xCoord = parseFloat(coords[1].trim());
                //let yCoord = parseFloat(coords[2].trim());
                return [null, null];
            }

        </script>
        <script name="unitTests">

            const invalidInputs = ["", "xxx.xxx, yyy.yyy", "32,64 24,72", "91.342, 24.728", "32.647, 181.657", "32.6s47, 181.657ds", "39.942, 32.640,"
                                            , "39.942, 32.640.", "39.942, 32.640, 25.478"];
            const validInputs = ["32.64, 24.72", " 32.64 , 24.72 ", "-32.647, -24.728", "39.942,32.640"];

            const inCityCoords =  
            [ 
                ["Ankara", 39.942, 32.643], //rakım, şehir merkezine uzaklık, distancetoEC eklenecek
                ["İstanbul", 41.039, 28.978], 
                ["İzmir", 38.414, 27.149], 
                ["Adana", 37.026, 35.359], 
                ["New York", 40.695, -73.995], 
                ["London", 51.517, -0.136], 
                ["Berlin", 52.519, 13.409], 
                ["Moscow", 55.760, 37.628], 
                ["Hong Kong", 22.287, 114.167], 
                [ "Sydney", -33.869, 151.214]
                //Aynı şehirde farklı noktalar eklenebilir
            ];

            const outCityCoords = 
            [
                ["North Atlantic Ocean", 33.953, -40.783],
                ["North Pasific Ocean", 30.102, -171.692], 
                ["Sahara Desert", 22.794, 14.988],
                ["Greenland", 65.874, -46.301], 
                ["Mount Everest", 27.988, 86.922], 
            ];

            function testGetCity()
            {
                inCityCoords.forEach(coord => 
                {
                    let city = getCity([coord[1], coord[2]]);
                    console.assert(city != null,
                    {
                        coord: coord.toString(),
                        city: city,
                        error: "InCityCoords getCity(): city cannot be null"
                    });
                    console.assert(city === coord[0],
                    {
                        coord: coord.toString(),
                        city: city,
                        error: "InCityCoords getCity(): uncorrect city"
                    });
                });

                outCityCoords.forEach(coord => 
                {
                    let city = getCity([coord[1], coord[2]]);
                    console.assert(city != null,
                    {
                        coord: coord.toString(),
                        city: city,
                        error: "OutCityCoords getCity(): city cannot be null"
                    });
                    console.assert(city === coord[0],
                    {
                        coord: coord.toString(),
                        city: city,
                        error: "OutCityCoords getCity(): uncorrect city"
                    });
                });
            }

            function testGetDeviceCoordinates()
            {
                let coords = getDeviceCoordinates();
                console.assert(coords[0] != null && coords[1] != null,
                {
                    xCoord: coords[0], 
                    yCoord: coords[1], 
                    error: "getDeviceCoordinates(): coords cannot be null"
                });
                console.assert(coords[0] >= -90.0 && coords[0] <= 90.0 && coords[1] >= -180.0 && coords[1] <= 180.0, 
                {
                    xCoord: coords[0], 
                    yCoord: coords[1], 
                    error: "getDeviceCoordinates(): -90.0 <= x <= 90.0, -180.0 <= y <= 180.0"
                });
            }

            function testGetNearestCityCenterDistance()
            {
                inCityCoords.forEach(coord => 
                {
                    let distance = getNearestCityCenterDistance([coord[1], coord[2]]);
                    console.assert(distance != null,
                    {
                        coord: coord.toString(),
                        distance: distance,
                        error: "InCityCoords getNearestCityCenterDistance(): distance cannot be null"
                    });
                    console.assert(distance === coord[0],
                    {
                        coord: coord.toString(),
                        distance: distance,
                        error: "InCityCoords getNearestCityCenterDistance(): uncorrect distance"
                    });
                });

                outCityCoords.forEach(coord => 
                {
                    let distance = getNearestCityCenterDistance([coord[1], coord[2]]);
                    console.assert(distance != null,
                    {
                        coord: coord.toString(),
                        distance: distance,
                        error: "OutCityCoords getNearestCityCenterDistance(): distance cannot be null"
                    });
                    console.assert(distance != coord[0],
                    {
                        coord: coord.toString(),
                        distance: distance,
                        error: "OutCityCoords getNearestCityCenterDistance(): uncorrect distance"
                    });
                });
            }

            function testGetEarthCenterDistance()
            {
                inCityCoords.forEach(coord => 
                {
                    let distance = getEarthCenterDistance([coord[1], coord[2]]);
                    console.assert(distance != null,
                    {
                        coord: coord.toString(),
                        distance: distance,
                        error: "InCityCoords getEarthCenterDistance(): distance cannot be null"
                    });
                    console.assert(distance === coord[0],
                    {
                        coord: coord.toString(),
                        distance: distance,
                        error: "InCityCoords getEarthCenterDistance(): uncorrect distance"
                    });
                });

                outCityCoords.forEach(coord => 
                {
                    let distance = getEarthCenterDistance([coord[1], coord[2]]);
                    console.assert(distance != null,
                    {
                        coord: coord.toString(),
                        distance: distance,
                        error: "OutCityCoords getEarthCenterDistance(): distance cannot be null"
                    });
                    console.assert(distance != coord[0],
                    {
                        coord: coord.toString(),
                        distance: distance,
                        error: "OutCityCoords getEarthCenterDistance(): uncorrect distance"
                    });
                });
            }

            function testParseCoord()
            {   
                invalidInputs.forEach(input => 
                {
                    let coords = parseCoord(input);
                    console.assert(coords[0] != null && coords[1] != null,
                    {
                        input: input,
                        xCoord: coords[0], 
                        yCoord: coords[1], 
                        error: "Invalid input parsing: coords cannot be null"
                    });
                    console.assert(isNaN(coords[0]) && isNaN(coords[1]), 
                    {
                        input: input,
                        xCoord: coords[0], 
                        yCoord: coords[1], 
                        error: "Invalid input parsing: x = NaN, y = NaN"
                    });
                });
                
                validInputs.forEach(input => 
                {
                    let coords = parseCoord(input);
                    console.assert(coords[0] != null && coords[1] != null,
                    {
                        input: input,
                        xCoord: coords[0], 
                        yCoord: coords[1], 
                        error: "Valid input parsing: coords cannot be null"
                    });
                    console.assert(coords[0] >= -90.0 && coords[0] <= 90.0 && coords[1] >= -180.0 && coords[1] <= 180.0, 
                    {
                        input: input,
                        xCoord: coords[0], 
                        yCoord: coords[1], 
                        error: "Valid input parsing: -90.0 <= x <= 90.0, -180.0 <= y <= 180.0"
                    });
                });
            }

            function unitTest()
            {
                testParseCoord();
                testGetDeviceCoordinates();
                testGetCity();
                testGetNearestCityCenterDistance();
                testGetEarthCenterDistance();
            }

            unitTest();

        </script>
    </body>
</html>
